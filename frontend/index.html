<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alpha Algo AI - Smart Trading</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
</head>

<body class="home-mode">
    <nav class="navbar">
        <div class="nav-content">
            <a href="/" class="brand">
                <img src="/static/ai_logo.png" alt="AI Icon" class="brand-icon">
                <span>ALPHA AI</span>
            </a>
            <div class="nav-links">
                <a href="javascript:void(0)" onclick="showPortfolio()" class="nav-item">포트폴리오</a>
            </div>
            <div class="search-container">
                <input type="text" id="stockSearch" placeholder="종목명 또는 종목코드 검색" autocomplete="off">
            </div>
        </div>
    </nav>

    <main class="container">
        <!-- Dashboard Home View -->
        <div id="homeView">
            <h2 class="section-title">시장지수</h2>
            <div class="index-grid">
                <div class="card index-card" id="kospiCard" onclick="selectStock('0001')">
                    <div class="idx-info">
                        <span class="idx-name">코스피</span>
                        <div class="idx-price-group">
                            <span class="idx-price" id="homeKospiPrice">---</span>
                            <span class="idx-change" id="homeKospiChange">--</span>
                        </div>
                    </div>
                    <canvas id="kospiChart" class="mini-chart"></canvas>
                </div>
                <div class="card index-card" id="kosdaqCard" onclick="selectStock('1001')">
                    <div class="idx-info">
                        <span class="idx-name">코스닥</span>
                        <div class="idx-price-group">
                            <span class="idx-price" id="homeKosdaqPrice">---</span>
                            <span class="idx-change" id="homeKosdaqChange">--</span>
                        </div>
                    </div>
                    <canvas id="kosdaqChart" class="mini-chart"></canvas>
                </div>
                <div class="card index-card" id="kospi200Card" onclick="selectStock('2001')">
                    <div class="idx-info">
                        <span class="idx-name">코스피 200</span>
                        <div class="idx-price-group">
                            <span class="idx-price" id="homeKospi200Price">---</span>
                            <span class="idx-change" id="homeKospi200Change">--</span>
                        </div>
                    </div>
                    <canvas id="kospi200Chart" class="mini-chart"></canvas>
                </div>
            </div>

            <div class="ranking-section">
                <div class="section-header">
                    <h2 class="section-title">실시간 거래대금 상위</h2>
                    <span class="update-time" id="lastUpdateTime">방금 전 업데이트</span>
                </div>
                <div class="card ranking-card">
                    <div id="transactionRankingList" class="ranking-list">
                        <!-- Items injected by JS -->
                        <div class="loading-shimmer">로딩 중...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detail View (Initially Hidden) -->
        <div id="detailView" style="display: none;">
            <section class="hero-section" id="heroSection">
                <div class="stock-title-row">
                    <button class="btn-back-home" onclick="showHome()">
                        <span class="icon-arrow">←</span>
                        <span class="btn-text">홈으로</span>
                    </button>
                    <h1 class="stock-name" id="hogaStockName">---</h1>
                    <span class="stock-symbol" id="stockCodeLabel">---</span>
                </div>
                <div class="main-price-row">
                    <div class="current-price" id="mainCurrentPrice">0</div>
                    <div class="price-change" id="mainPriceChange">-- (--%)</div>
                </div>
            </section>

            <div class="main-grid">
                <div class="content-left">
                    <div class="chart-card card">
                        <div class="card-header">
                            <span class="card-title">주가 흐름</span>
                        </div>
                        <canvas id="stockMainChart" class="main-stock-chart"></canvas>
                    </div>

                    <div class="card toga-card">
                        <div class="card-header">
                            <span class="card-title">호가</span>
                        </div>
                        <div class="hoga-wrapper">
                            <div class="hoga-header">
                                <span class="h-label">매도잔량</span>
                                <span class="h-label">호가</span>
                                <span class="h-label">매수잔량</span>
                            </div>
                            <div id="hogaList" class="hoga-list">
                                <!-- Hoga rows will be rendered here -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="content-right sticky-panel">
                    <div class="card order-panel">
                        <div class="order-tabs">
                            <div class="order-tab active" data-type="buy">구매</div>
                            <div class="order-tab" data-type="sell">판매</div>
                        </div>
                        <div class="price-type-selector">
                            <div class="price-type-tab active" data-divsn="00">지정가</div>
                            <div class="price-type-tab" data-divsn="01">시장가</div>
                        </div>
                        <div class="input-group">
                            <label class="input-label">가격</label>
                            <input type="number" id="orderPrice" class="order-input" placeholder="0">
                        </div>
                        <div class="input-group">
                            <label class="input-label">수량</label>
                            <input type="number" id="orderQty" class="order-input" placeholder="0">
                        </div>
                        <div class="order-summary">
                            <span>예상 주문금액</span>
                            <span id="estimatedAmount">0원</span>
                        </div>
                        <button id="executeOrderBtn" class="execute-btn buy">구매하기</button>
                        <div class="buying-power-info">
                            <span>주문 가능</span>
                            <span id="buyingPower">0원</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Portfolio View (Initially Hidden) -->
        <div id="portfolioView" style="display: none;">
            <section class="hero-section">
                <div class="stock-title-row">
                    <button class="btn-back-home" onclick="showHome()">
                        <span class="icon-arrow">←</span>
                        <span class="btn-text">홈으로</span>
                    </button>
                    <h1 class="stock-name">나의 자산</h1>
                </div>
                <div class="portfolio-summary-grid">
                    <div class="summary-item">
                        <label>총 평가금액</label>
                        <div class="value" id="totalEvalAmount">0원</div>
                    </div>
                    <div class="summary-item">
                        <label>평가손익</label>
                        <div class="value" id="totalPflsAmount">0원</div>
                    </div>
                    <div class="summary-item">
                        <label>수익률</label>
                        <div class="value" id="totalPflsRate">0%</div>
                    </div>
                    <div class="summary-item">
                        <label>주문가능(예수금)</label>
                        <div class="value" id="cashBalance">0원</div>
                    </div>
                </div>
            </section>

            <div class="portfolio-content">
                <div class="section-header">
                    <h2 class="section-title">보유 종목</h2>
                </div>
                <div class="card portfolio-card">
                    <div class="holdings-header">
                        <span>종목명</span>
                        <span>보유량</span>
                        <span>매수평가</span>
                        <span>수익률</span>
                    </div>
                    <div id="holdingsList" class="holdings-list">
                        <!-- Items injected by JS -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Global Modal -->
    <div id="globalModal" class="modal-overlay" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <span class="modal-title" id="modalTitle">알림</span>
            </div>
            <div class="modal-body" id="modalMessage">
                메시지 내용
            </div>
            <div class="modal-footer" id="modalFooter">
                <button class="modal-btn cancel" id="modalCancelBtn">취소</button>
                <button class="modal-btn confirm" id="modalConfirmBtn">확인</button>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>

</html>